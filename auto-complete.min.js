/*!
 * JavaScript autoComplete v1.0.3
 * https://github.com/Pixabay/JavaScript-autoComplete
 */
!function(a,b){var c="autoComplete";"function"==typeof define&&define.amd?define([],function(){return a[c]=b()}):"object"==typeof exports?module.exports=b():a[c]=b()}(this,function(){"use strict";function a(a){document.querySelector&&(this.settings=this.buildSettings(a),this.eventHandlers=[],this.instances=this.createInstances(this.settings.selector),this.addEvent(window,"resize",this.onResize))}return a.prototype={defaults:{selector:0,source:0,minChars:3,delay:150,cache:1,menuClass:"",renderItem:function(a,b){b=b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var c=new RegExp("("+b.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+a+'">'+a.replace(c,"<b>$1</b>")+"</div>"},onSelect:function(a,b,c){},popupContainer:document.body},buildSettings:function(a){var b={},c=this.defaults;for(var d in c)a.hasOwnProperty(d)?b[d]=a[d]:b[d]=c[d];return b},createInstances:function(a){for(var b="object"==typeof a?[a]:document.querySelectorAll(a),c=[],d=this.settings,e=0;e<b.length;e++){var f=b[e],g=this.createSuggestionsContainer(),h={textField:f,suggestionsContainer:g,autocompleteAttr:f.getAttribute("autocomplete"),cache:{},lastVal:""},i={instance:h};this.live("autocomplete-suggestion","mouseleave",this.onMouseLeave,g,i),this.live("autocomplete-suggestion","mouseover",this.onMouseOver,g,i),this.live("autocomplete-suggestion","mousedown",this.onMouseDown,g,i),this.addEvent(f,"blur",this.onBlur,i),this.addEvent(f,"keydown",this.onKeyDown,i),this.addEvent(f,"keyup",this.onKeyUp,i),d.minChars||this.addEvent(f,"focus",this.onFocus,i),f.autoCompleteInstance=h,f.setAttribute("autocomplete","off"),d.popupContainer.appendChild(g),c.push(h)}return c},createSuggestionsContainer:function(){var a=document.createElement("div");return a.className="autocomplete-suggestions "+this.settings.menuClass,a},updateSuggestionsContainer:function(a,b,c){var d=a.textField,e=a.suggestionsContainer,f=d.getBoundingClientRect();if(e.style.left=f.left+(window.pageXOffset||document.documentElement.scrollLeft)+"px",e.style.top=f.bottom+(window.pageYOffset||document.documentElement.scrollTop)+1+"px",e.style.width=f.right-f.left+"px",!b&&(e.style.display="block",e.maxHeight||(e.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(e,null):e.currentStyle).maxHeight)),e.suggestionHeight||(e.suggestionHeight=e.querySelector(".autocomplete-suggestion").offsetHeight),e.suggestionHeight))if(c){var g=e.scrollTop,h=c.getBoundingClientRect().top-e.getBoundingClientRect().top;h+e.suggestionHeight-e.maxHeight>0?e.scrollTop=h+e.suggestionHeight+g-e.maxHeight:0>h&&(e.scrollTop=h+g)}else e.scrollTop=0},suggest:function(a,b,c){var d=a.suggestionsContainer,e=this.settings;if(a.cache[b]=c,c.length&&b.length>=e.minChars){for(var f="",g=0;g<c.length;g++)f+=e.renderItem(c[g],b);d.innerHTML=f,this.updateSuggestionsContainer(a,!1)}else d.style.display="none"},hasClass:function(a,b){return a.classList?a.classList.contains(b):new RegExp("\\b"+b+"\\b").test(a.className)},addEvent:function(a,b,c,d){var e=this,f=function(a){return c.call(e,this,a,d)};a.attachEvent?a.attachEvent("on"+b,f):a.addEventListener(b,f),this.eventHandlers.push({el:a,type:b,handler:f})},removeEvent:function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c)},live:function(a,b,c,d,e){d=d||document;var f=this,g=function(b,d){for(var g,h=d.target||d.srcElement;h&&!(g=f.hasClass(h,a));)h=h.parentElement;g&&c.apply(this,[h,d,e])};this.addEvent(d,b,g,e),this.eventHandlers.push({el:d,type:b,handler:g})},destroy:function(){for(var a=this.instances,b=this.eventHandlers,c=0;c<b.length;c++){var d=b[c];this.removeEvent(d.el,d.type,d.handler)}for(var e=0;e<a.length;e++){var f=a[e];f.autocompleteAttr?f.setAttribute("autocomplete",f.autocompleteAttr):f.removeAttribute("autocomplete"),f.suggestionsContainer.parentNode.removeChild(a.sc),this.instances=null}},onResize:function(a,b,c){for(var d=this.instances,e=0;e<d.length;e++)this.updateSuggestionsContainer(d[e],!0)},onMouseLeave:function(a,b,c){var d=c.instance.suggestionsContainer,e=d.querySelector(".autocomplete-suggestion.selected");e&&setTimeout(function(){e.className=e.className.replace(/\s*selected/,"")},20)},onMouseOver:function(a,b,c){var d=c.instance.suggestionsContainer,e=d.querySelector(".autocomplete-suggestion.selected");e&&(e.className=e.className.replace(/\s*selected/,"")),a.className+=" selected"},onMouseDown:function(a,b,c){var d=c.instance,e=d.textField,f=d.suggestionsContainer;if(this.hasClass(a,"autocomplete-suggestion")){var g=a.getAttribute("data-val");e.value=g,this.settings.onSelect(b,g,a),f.style.display="none"}},onBlur:function(a,b,c){var d=c.instance,e=d.suggestionsContainer,f=0;try{f=document.querySelector(".autocomplete-suggestions:hover")}catch(g){}f?a!==document.activeElement&&setTimeout(function(){a.focus()},20):(d.lastVal=a.value,e.style.display="none",setTimeout(function(){e.style.display="none"},350))},onKeyDown:function(a,b,c){var d,e=window.event?b.keyCode:b.which,f=c.instance,g=f.suggestionsContainer;if((40===e||38===e)&&g.innerHTML){var h;return d=g.querySelector(".autocomplete-suggestion.selected"),d?(h=40===e?d.nextSibling:d.previousSibling,h?(d.className=d.className.replace(/\s*selected/,""),h.className+=" selected",a.value=h.getAttribute("data-val")):(d.className=d.className.replace(/\s*selected/,""),a.value=f.lastVal,h=0)):(h=40===e?g.querySelector(".autocomplete-suggestion"):g.childNodes[g.childNodes.length-1],h.className+=" selected",a.value=h.getAttribute("data-val")),this.updateSuggestionsContainer(f,!1,h),!1}27===e?(a.value=f.lastVal,g.style.display="none"):(13===e||9===e)&&(d=g.querySelector(".autocomplete-suggestion.selected"),d&&"none"!==g.style.display&&(this.settings.onSelect(b,d.getAttribute("data-val"),d),setTimeout(function(){g.style.display="none"},20)))},onKeyUp:function(a,b,c){var d=window.event?b.keyCode:b.which,e=this,f=e.settings,g=c.instance;if(!d||(35>d||d>40)&&13!==d&&27!==d){var h=g.textField.value;if(h.length>=f.minChars){if(h!==g.lastVal){g.lastVal=h,clearTimeout(g.timer);var i=function(a){e.suggest(g,h,a)};if(f.cache){if(h in g.cache)return void i(g.cache[h]);for(var j=1;j<h.length-f.minChars;j++){var k=h.slice(0,h.length-j);if(k in g.cache&&!g.cache[k].length)return void i([])}}g.timer=setTimeout(function(){f.source(h,i)},f.delay)}}else g.lastVal=h,g.suggestionsContainer.style.display="none"}},onFocus:function(a,b,c){c.instance.lastVal="\n",this.onKeyUp.call(this,a,b,c)}},a});
//# sourceMappingURL=auto-complete.min.js.map